{"version":3,"file":"cart-summary-drawer-6be68935.js","mappings":"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","sources":["webpack://checkout/./packages/core/src/app/cart/CartSummaryDrawer.tsx","webpack://checkout/./packages/core/src/app/cart/EditLink.tsx","webpack://checkout/./packages/core/src/app/coupon/AppliedCoupon.tsx","webpack://checkout/./packages/core/src/app/giftCertificate/AppliedGiftCertificate.tsx","webpack://checkout/./packages/core/src/app/ui/icon/IconRemove.tsx","webpack://checkout/./packages/core/src/app/cart/AppliedRedeemable.tsx","webpack://checkout/./packages/core/src/app/cart/AppliedRedeemables.tsx","webpack://checkout/./packages/core/src/app/cart/Redeemable.tsx","webpack://checkout/./packages/core/src/app/cart/mapToCartSummaryProps.ts","webpack://checkout/./packages/core/src/app/cart/mapToRedeemableProps.ts","webpack://checkout/./packages/core/src/app/cart/withRedeemable.tsx","webpack://checkout/./packages/core/src/app/cart/mapToOrderSummarySubtotalsProps.ts","webpack://checkout/./packages/core/src/app/order/getLineItemsCount.ts","webpack://checkout/./packages/core/src/app/order/OrderSummaryModal.tsx","webpack://checkout/./packages/core/src/app/order/OrderSummaryDrawer.tsx","webpack://checkout/./packages/core/src/app/ui/modal/ModalTrigger.tsx"],"sourcesContent":["import React, { memo, FunctionComponent } from 'react';\r\n\r\nimport { withCheckout } from '../checkout';\r\nimport OrderSummaryDrawer from '../order/OrderSummaryDrawer';\r\n\r\nimport mapToCartSummaryProps from './mapToCartSummaryProps';\r\nimport withRedeemable from './withRedeemable';\r\nimport { WithCheckoutCartSummaryProps } from './CartSummary';\r\nimport EditLink from './EditLink';\r\n\r\nconst CartSummaryDrawer: FunctionComponent<WithCheckoutCartSummaryProps> = ({\r\n    cartUrl,\r\n    ...props\r\n}) => (\r\n    withRedeemable(OrderSummaryDrawer)({\r\n        ...props,\r\n        cartUrl,\r\n        headerLink: (\r\n            <EditLink\r\n                className=\"modal-header-link cart-modal-link\"\r\n                url={ cartUrl }\r\n            />\r\n        ),\r\n    })\r\n);\r\n\r\nexport default withCheckout(mapToCartSummaryProps)(memo(CartSummaryDrawer));\r\n","import React, { memo, FunctionComponent } from 'react';\r\n\r\nimport { TranslatedString } from '../locale';\r\n\r\nexport interface EditLinkProps {\r\n    className?: string;\r\n    url: string;\r\n}\r\n\r\nconst EditLink: FunctionComponent<EditLinkProps> = ({ className, url }) => (\r\n    <a\r\n        className={ className || 'cart-header-link' }\r\n        data-test=\"cart-edit-link\"\r\n        href={ url }\r\n        id=\"cart-edit-link\"\r\n        target=\"_top\"\r\n    >\r\n        <TranslatedString id=\"cart.edit_cart_action\" />\r\n    </a>\r\n);\r\n\r\nexport default memo(EditLink);\r\n","import { Coupon } from '@bigcommerce/checkout-sdk';\r\nimport React, { memo, FunctionComponent } from 'react';\r\n\r\nimport { TranslatedString } from '../locale';\r\n\r\nexport interface AppliedCouponProps {\r\n    coupon: Coupon;\r\n}\r\n\r\nconst AppliedCoupon: FunctionComponent<AppliedCouponProps> = ({ coupon }) => (\r\n    <div\r\n        className=\"redeemable-column redeemable-info\"\r\n        data-test=\"redeemable-item--coupon\"\r\n    >\r\n        <span className=\"redeemable-info-header\">\r\n            <span\r\n                className=\"redeemable-info-header--highlight\"\r\n                data-test=\"coupon-amount\"\r\n            >\r\n                { coupon.displayName }\r\n            </span>\r\n\r\n            { ' ' }\r\n\r\n            <TranslatedString id=\"redeemable.coupon_text\" />\r\n        </span>\r\n\r\n        <span className=\"redeemable-info-subHeader\" data-test=\"coupon-code\">\r\n            { coupon.code }\r\n        </span>\r\n    </div>\r\n);\r\n\r\nexport default memo(AppliedCoupon);\r\n","import { GiftCertificate } from '@bigcommerce/checkout-sdk';\r\nimport React, { memo, FunctionComponent } from 'react';\r\n\r\nimport { ShopperCurrency } from '../currency';\r\nimport { TranslatedString } from '../locale';\r\n\r\nexport interface AppliedGiftCertificateProps {\r\n    giftCertificate: GiftCertificate;\r\n}\r\n\r\nconst AppliedGiftCertificate: FunctionComponent<AppliedGiftCertificateProps> = ({ giftCertificate }) => (\r\n    <div\r\n        className=\"redeemable-column redeemable-info\"\r\n        data-test=\"redeemable-item--giftCertificate\"\r\n    >\r\n        <span className=\"redeemable-info-header\">\r\n            <span className=\"redeemable-info-header--highlight\" data-test=\"giftCertificate-amount\">\r\n                <ShopperCurrency amount={ giftCertificate.used } />\r\n            </span>\r\n\r\n            { ' ' }\r\n\r\n            <TranslatedString id=\"redeemable.gift_certificate_text\" />\r\n        </span>\r\n\r\n        <span className=\"redeemable-info-subHeader\">\r\n            { giftCertificate.remaining > 0 && <span className=\"redeemable-info-subHeader--remaining\">\r\n                <TranslatedString id=\"redeemable.gift_certificate_remaining_text\" />\r\n\r\n                { ' ' }\r\n\r\n                <span data-test=\"giftCertificate-remaining\">\r\n                    <ShopperCurrency amount={ giftCertificate.remaining } />\r\n                </span>\r\n            </span> }\r\n\r\n            <span data-test=\"giftCertificate-code\">\r\n                { giftCertificate.code }\r\n            </span>\r\n        </span>\r\n    </div>\r\n);\r\n\r\nexport default memo(AppliedGiftCertificate);\r\n","import React, { FunctionComponent } from 'react';\r\n\r\nimport withIconContainer from './withIconContainer';\r\n\r\nconst IconRemove: FunctionComponent = () => (\r\n    <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\r\n    </svg>\r\n);\r\n\r\nexport default withIconContainer(IconRemove);\r\n","import classNames from 'classnames';\r\nimport React, { FunctionComponent } from 'react';\r\n\r\nimport { TranslatedString } from '../locale';\r\nimport { IconRemove } from '../ui/icon';\r\n\r\nimport './AppliedRedeemable.scss';\r\n\r\nexport interface AppliedRedeemableProps {\r\n    isRemoving: boolean;\r\n    onRemove(): void;\r\n}\r\n\r\nconst AppliedRedeemable: FunctionComponent<AppliedRedeemableProps> = ({\r\n    children,\r\n    isRemoving,\r\n    onRemove,\r\n}) => (\r\n    <div className=\"form-checklist-header\">\r\n        <div className=\"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox\">\r\n            <span className=\"is-srOnly\">\r\n                <TranslatedString id=\"redeemable.applied_text\" />\r\n            </span>\r\n        </div>\r\n\r\n        <div className=\"form-label form-label-redeemable\">\r\n            <div className=\"redeemable\">\r\n                { children }\r\n                <div className=\"redeemable-column redeemable-actions\">\r\n                    <button\r\n                        className={ classNames(\r\n                            'redeemable-remove',\r\n                            { 'is-loading': isRemoving }\r\n                        ) }\r\n                        data-test=\"redeemable-remove\"\r\n                        disabled={ isRemoving }\r\n                        onClick={ onRemove }\r\n                        type=\"button\"\r\n                    >\r\n                        <IconRemove />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default AppliedRedeemable;\r\n","import { Coupon, GiftCertificate } from '@bigcommerce/checkout-sdk';\r\nimport React, { memo, useCallback, FunctionComponent } from 'react';\r\n\r\nimport { AppliedCoupon } from '../coupon';\r\nimport { AppliedGiftCertificate } from '../giftCertificate';\r\n\r\nimport AppliedRedeemable from './AppliedRedeemable';\r\n\r\ninterface AppliedCouponProps {\r\n    coupon: Coupon;\r\n    isRemoving?: boolean;\r\n    onRemoved(code: string): void;\r\n}\r\n\r\nconst AppliedCouponChecklistItem: FunctionComponent<AppliedCouponProps> = ({\r\n    coupon,\r\n    onRemoved,\r\n    isRemoving = false,\r\n}) => {\r\n    const handleRemove = useCallback(() => {\r\n        onRemoved(coupon.code);\r\n    }, [\r\n        coupon,\r\n        onRemoved,\r\n    ]);\r\n\r\n    return (\r\n        <li className=\"form-checklist-item optimizedCheckout-form-checklist-item\">\r\n            <AppliedRedeemable\r\n                isRemoving={ isRemoving }\r\n                onRemove={ handleRemove }\r\n            >\r\n                <AppliedCoupon coupon={ coupon } />\r\n            </AppliedRedeemable>\r\n        </li>\r\n    );\r\n};\r\n\r\ninterface AppliedGiftCertificateProps {\r\n    giftCertificate: GiftCertificate;\r\n    isRemoving?: boolean;\r\n    onRemoved(code: string): void;\r\n}\r\n\r\nconst AppliedGiftCertificateChecklistItem: FunctionComponent<AppliedGiftCertificateProps> = ({\r\n    giftCertificate,\r\n    onRemoved,\r\n    isRemoving = false,\r\n}) => {\r\n    const handleRemove = useCallback(() => {\r\n        onRemoved(giftCertificate.code);\r\n    }, [\r\n        giftCertificate,\r\n        onRemoved,\r\n    ]);\r\n\r\n    return (\r\n        <li className=\"form-checklist-item optimizedCheckout-form-checklist-item\">\r\n            <AppliedRedeemable\r\n                isRemoving={ isRemoving }\r\n                onRemove={ handleRemove }\r\n            >\r\n                <AppliedGiftCertificate giftCertificate={ giftCertificate } />\r\n            </AppliedRedeemable>\r\n        </li>\r\n    );\r\n};\r\n\r\nexport interface AppliedRedeemablesProps {\r\n    coupons?: Coupon[];\r\n    giftCertificates?: GiftCertificate[];\r\n    isRemovingGiftCertificate?: boolean;\r\n    isRemovingCoupon?: boolean;\r\n    onRemovedCoupon(code: string): void;\r\n    onRemovedGiftCertificate(code: string): void;\r\n}\r\n\r\nconst AppliedRedeemables: FunctionComponent<AppliedRedeemablesProps> = ({\r\n    coupons = [],\r\n    giftCertificates = [],\r\n    isRemovingCoupon = false,\r\n    isRemovingGiftCertificate = false,\r\n    onRemovedCoupon,\r\n    onRemovedGiftCertificate,\r\n}) => {\r\n    if (!coupons.length && !giftCertificates.length) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <ul className=\"form-checklist optimizedCheckout-form-checklist\" data-test=\"redeemables-list\">\r\n            { coupons.map(coupon => (\r\n                <AppliedCouponChecklistItem\r\n                    coupon={ coupon }\r\n                    isRemoving={ isRemovingCoupon }\r\n                    key={ coupon.code }\r\n                    onRemoved={ onRemovedCoupon }\r\n                />\r\n            )) }\r\n\r\n            { giftCertificates.map(giftCertificate => (\r\n                <AppliedGiftCertificateChecklistItem\r\n                    giftCertificate={ giftCertificate }\r\n                    isRemoving={ isRemovingGiftCertificate }\r\n                    key={ giftCertificate.code }\r\n                    onRemoved={ onRemovedGiftCertificate }\r\n                />\r\n            )) }\r\n        </ul>\r\n    );\r\n};\r\n\r\nexport default memo(AppliedRedeemables);\r\n","import { CheckoutSelectors, RequestError } from '@bigcommerce/checkout-sdk';\r\nimport { memoizeOne } from '@bigcommerce/memoize';\r\nimport { withFormik, FieldProps, FormikProps } from 'formik';\r\nimport { noop } from 'lodash';\r\nimport React, { memo, useCallback, Fragment, FunctionComponent, KeyboardEvent } from 'react';\r\nimport { object, string } from 'yup';\r\n\r\nimport { preventDefault } from '../common/dom';\r\nimport { withLanguage, TranslatedString, WithLanguageProps } from '../locale';\r\nimport { Alert, AlertType } from '../ui/alert';\r\nimport { Button, ButtonVariant } from '../ui/button';\r\nimport { FormContextType, FormField, FormProvider, Label, TextInput } from '../ui/form';\r\nimport { Toggle } from '../ui/toggle';\r\n\r\nimport AppliedRedeemables, { AppliedRedeemablesProps } from './AppliedRedeemables';\r\n\r\nexport interface RedeemableFormValues {\r\n    redeemableCode: string;\r\n}\r\n\r\nexport type ReedemableChildrenProps = Pick<RedeemableProps,\r\n    'onRemovedCoupon' |\r\n    'onRemovedGiftCertificate' |\r\n    'isRemovingGiftCertificate' |\r\n    'isRemovingCoupon' |\r\n    'coupons' |\r\n    'giftCertificates'\r\n>;\r\n\r\nexport type RedeemableProps = {\r\n    appliedRedeemableError?: RequestError;\r\n    isApplyingRedeemable?: boolean;\r\n    isRemovingRedeemable?: boolean;\r\n    removedRedeemableError?: RequestError;\r\n    showAppliedRedeemables?: boolean;\r\n    shouldCollapseCouponCode?: boolean;\r\n    applyCoupon(code: string): Promise<CheckoutSelectors>;\r\n    applyGiftCertificate(code: string): Promise<CheckoutSelectors>;\r\n    clearError(error: Error): void;\r\n} & AppliedRedeemablesProps;\r\n\r\nconst Redeemable: FunctionComponent<RedeemableProps & WithLanguageProps & FormikProps<RedeemableFormValues>> = ({\r\n    shouldCollapseCouponCode,\r\n    showAppliedRedeemables,\r\n    ...formProps\r\n}) => (\r\n    <Toggle openByDefault={ !shouldCollapseCouponCode }>\r\n        { ({ toggle, isOpen }) => (\r\n            <Fragment>\r\n                { shouldCollapseCouponCode && <a\r\n                    className=\"redeemable-label\"\r\n                    data-test=\"redeemable-label\"\r\n                    href=\"#\"\r\n                    onClick={ preventDefault(toggle) }\r\n                >\r\n                    <TranslatedString id=\"redeemable.toggle_action\" />\r\n                </a> }\r\n                { !shouldCollapseCouponCode && <div className=\"redeemable-label\">\r\n                    <TranslatedString id=\"redeemable.toggle_action\" />\r\n                </div> }\r\n                { (isOpen || !shouldCollapseCouponCode) && <div data-test=\"redeemable-collapsable\">\r\n                    <RedeemableForm { ...formProps } />\r\n                    { showAppliedRedeemables &&\r\n                        <AppliedRedeemables { ...formProps } /> }\r\n                </div> }\r\n            </Fragment>\r\n        ) }\r\n    </Toggle>\r\n);\r\n\r\nconst RedeemableForm: FunctionComponent<Partial<RedeemableProps> & FormikProps<RedeemableFormValues> & WithLanguageProps> = ({\r\n    appliedRedeemableError,\r\n    isApplyingRedeemable,\r\n    clearError = noop,\r\n    submitForm,\r\n    language,\r\n}) => {\r\n    const handleKeyDown = useCallback(memoizeOne((setSubmitted: FormContextType['setSubmitted']) => (\r\n        (event: KeyboardEvent) => {\r\n            if (appliedRedeemableError) {\r\n                clearError(appliedRedeemableError);\r\n            }\r\n\r\n            // note: to prevent submitting main form, we manually intercept\r\n            // the enter key event and submit the \"subform\".\r\n            if (event.keyCode === 13) {\r\n                setSubmitted(true);\r\n                submitForm();\r\n                event.preventDefault();\r\n            }\r\n        }\r\n    )), [\r\n        appliedRedeemableError,\r\n        clearError,\r\n        submitForm,\r\n    ]);\r\n\r\n    const handleSubmit = useCallback(memoizeOne((setSubmitted: FormContextType['setSubmitted']) => (\r\n        () => {\r\n            setSubmitted(true);\r\n            submitForm();\r\n        }\r\n    )), []);\r\n\r\n    const renderLabel = useCallback((name: string) => (\r\n        <Label hidden htmlFor={ name }>\r\n            <TranslatedString id=\"redeemable.code_label\" />\r\n        </Label>\r\n    ), []);\r\n\r\n    const renderErrorMessage = useCallback((errorCode: string) => {\r\n        switch (errorCode) {\r\n        case 'min_purchase':\r\n            return <TranslatedString id=\"redeemable.coupon_min_order_total\" />;\r\n        case 'not_applicable':\r\n            return <TranslatedString id=\"redeemable.coupon_location_error\" />;\r\n        default:\r\n            return <TranslatedString id=\"redeemable.code_invalid_error\" />;\r\n        }\r\n    }, []);\r\n\r\n    const renderInput = useCallback((setSubmitted: FormContextType['setSubmitted']) => ({ field }: FieldProps) => (\r\n        <Fragment>\r\n            { appliedRedeemableError && appliedRedeemableError.errors && appliedRedeemableError.errors[0] &&\r\n                <Alert type={ AlertType.Error }>\r\n                    { renderErrorMessage(appliedRedeemableError.errors[0].code) }\r\n                </Alert> }\r\n\r\n            <div className=\"form-prefixPostfix\">\r\n                <TextInput\r\n                    { ...field }\r\n                    aria-label={ language.translate('redeemable.code_label') }\r\n                    className=\"form-input optimizedCheckout-form-input\"\r\n                    onKeyDown={ handleKeyDown(setSubmitted) }\r\n                    testId=\"redeemableEntry-input\"\r\n                />\r\n\r\n                <Button\r\n                    className=\"form-prefixPostfix-button--postfix\"\r\n                    id=\"applyRedeemableButton\"\r\n                    isLoading={ isApplyingRedeemable }\r\n                    onClick={ handleSubmit(setSubmitted) }\r\n                    testId=\"redeemableEntry-submit\"\r\n                    variant={ ButtonVariant.Secondary }\r\n                >\r\n                    <TranslatedString id=\"redeemable.apply_action\" />\r\n                </Button>\r\n            </div>\r\n        </Fragment>\r\n    ), [appliedRedeemableError, handleKeyDown, handleSubmit, isApplyingRedeemable, language, renderErrorMessage]);\r\n\r\n    const renderContent = useCallback(memoizeOne(({ setSubmitted }: FormContextType) => (\r\n        <FormField\r\n            input={ renderInput(setSubmitted) }\r\n            label={ renderLabel }\r\n            name=\"redeemableCode\"\r\n        />\r\n    )), [\r\n        renderLabel,\r\n        renderInput,\r\n    ]);\r\n\r\n    return <fieldset className=\"form-fieldset redeemable-entry\">\r\n        <FormProvider>\r\n            { renderContent }\r\n        </FormProvider>\r\n    </fieldset>;\r\n};\r\n\r\nexport default withLanguage(withFormik<RedeemableProps & WithLanguageProps, RedeemableFormValues>({\r\n    mapPropsToValues() {\r\n        return {\r\n            redeemableCode: '',\r\n        };\r\n    },\r\n\r\n    async handleSubmit({ redeemableCode }, { props: { applyCoupon, applyGiftCertificate, clearError } }) {\r\n        const code = redeemableCode.trim();\r\n\r\n        try {\r\n            await applyGiftCertificate(code);\r\n        } catch (error) {\r\n            clearError(error);\r\n            applyCoupon(code);\r\n        }\r\n    },\r\n\r\n    validationSchema({ language }: RedeemableProps & WithLanguageProps) {\r\n        return object({\r\n            redeemableCode: string()\r\n                .required(language.translate('redeemable.code_required_error')),\r\n        });\r\n    },\r\n})(memo(Redeemable)));\r\n","import { CheckoutContextProps } from '../checkout';\r\n\r\nimport mapToRedeemableProps from './mapToRedeemableProps';\r\nimport { WithCheckoutCartSummaryProps } from './CartSummary';\r\n\r\nexport default function mapToCartSummaryProps(\r\n    context: CheckoutContextProps\r\n): WithCheckoutCartSummaryProps | null {\r\n    const {\r\n        checkoutState: {\r\n            data: { getConfig, getCustomer, getCheckout },\r\n        },\r\n    } = context;\r\n\r\n    const checkout = getCheckout();\r\n    const config = getConfig();\r\n    const customer = getCustomer();\r\n    const redeemableProps = mapToRedeemableProps(context);\r\n\r\n    if (!checkout || !config || !redeemableProps || !customer) {\r\n        return null;\r\n    }\r\n\r\n    const { isStoreCreditApplied, grandTotal } = checkout;\r\n    const { storeCredit } = customer;\r\n\r\n    return {\r\n        checkout,\r\n        shopperCurrency: config.shopperCurrency,\r\n        cartUrl: config.links.cartLink,\r\n        storeCurrency: config.currency,\r\n        storeCreditAmount: isStoreCreditApplied ? Math.min(grandTotal, storeCredit) : undefined,\r\n        ...redeemableProps,\r\n    };\r\n}\r\n","import { CheckoutContextProps } from '../checkout';\r\nimport { EMPTY_ARRAY } from '../common/utility';\r\n\r\nimport { RedeemableProps } from './Redeemable';\r\n\r\nexport default function mapToRedeemableProps(\r\n    context: CheckoutContextProps\r\n): RedeemableProps | null {\r\n    const {\r\n        checkoutService,\r\n        checkoutState: {\r\n            data: {\r\n                getConfig,\r\n                getCoupons,\r\n                getGiftCertificates,\r\n            },\r\n            statuses: {\r\n                isApplyingCoupon,\r\n                isApplyingGiftCertificate,\r\n                isRemovingCoupon,\r\n                isRemovingGiftCertificate,\r\n            },\r\n            errors: {\r\n                getApplyCouponError,\r\n                getApplyGiftCertificateError,\r\n                getRemoveCouponError,\r\n                getRemoveGiftCertificateError,\r\n            },\r\n        },\r\n    } = context;\r\n\r\n    const config = getConfig();\r\n\r\n    if (!config) {\r\n        return null;\r\n    }\r\n\r\n    return {\r\n        appliedRedeemableError: getApplyCouponError() || getApplyGiftCertificateError(),\r\n        applyCoupon: checkoutService.applyCoupon,\r\n        applyGiftCertificate: checkoutService.applyGiftCertificate,\r\n        clearError: checkoutService.clearError,\r\n        coupons: getCoupons() || EMPTY_ARRAY,\r\n        giftCertificates: getGiftCertificates() || EMPTY_ARRAY,\r\n        isApplyingRedeemable: (isApplyingCoupon() || isApplyingGiftCertificate()),\r\n        isRemovingCoupon: isRemovingCoupon(),\r\n        isRemovingGiftCertificate: isRemovingGiftCertificate(),\r\n        onRemovedCoupon: checkoutService.removeCoupon,\r\n        onRemovedGiftCertificate: checkoutService.removeGiftCertificate,\r\n        removedRedeemableError: (getRemoveCouponError() || getRemoveGiftCertificateError()),\r\n        shouldCollapseCouponCode: config.checkoutSettings.isCouponCodeCollapsed,\r\n    };\r\n}\r\n","import React, { ComponentType, FunctionComponent } from 'react';\r\n\r\nimport { OrderSummaryProps, OrderSummarySubtotalsProps } from '../order';\r\n\r\nimport mapToOrderSummarySubtotalsProps from './mapToOrderSummarySubtotalsProps';\r\nimport { WithCheckoutCartSummaryProps } from './CartSummary';\r\nimport Redeemable from './Redeemable';\r\n\r\nexport default function withRedeemable(\r\n    OriginalComponent: ComponentType<OrderSummaryProps & OrderSummarySubtotalsProps>\r\n): FunctionComponent<\r\n    WithCheckoutCartSummaryProps &\r\n    { headerLink?: any }\r\n> {\r\n    return props => {\r\n        const {\r\n            checkout,\r\n            storeCurrency,\r\n            shopperCurrency,\r\n            headerLink,\r\n            onRemovedCoupon,\r\n            onRemovedGiftCertificate,\r\n            storeCreditAmount,\r\n            ...redeemableProps\r\n        } = props;\r\n\r\n        return (\r\n            <OriginalComponent\r\n                { ...mapToOrderSummarySubtotalsProps(checkout) }\r\n                additionalLineItems={\r\n                    <Redeemable { ...{\r\n                        ...redeemableProps,\r\n                        onRemovedCoupon,\r\n                        onRemovedGiftCertificate,\r\n                    } }\r\n                    />\r\n                }\r\n                headerLink={ headerLink }\r\n                lineItems={ checkout.cart.lineItems }\r\n                onRemovedCoupon={ onRemovedCoupon }\r\n                onRemovedGiftCertificate={ onRemovedGiftCertificate }\r\n                shopperCurrency={ shopperCurrency }\r\n                storeCreditAmount={ storeCreditAmount }\r\n                storeCurrency={ storeCurrency }\r\n                total={ checkout.outstandingBalance }\r\n            />\r\n        );\r\n    };\r\n}\r\n","import { Checkout } from '@bigcommerce/checkout-sdk';\r\n\r\nimport { OrderSummarySubtotalsProps } from '../order';\r\nimport { hasSelectedShippingOptions } from '../shipping';\r\n\r\nexport default function mapToOrderSummarySubtotalsProps({\r\n    subtotal,\r\n    cart: { discountAmount },\r\n    giftCertificates,\r\n    consignments,\r\n    handlingCostTotal,\r\n    shippingCostBeforeDiscount,\r\n    giftWrappingCostTotal,\r\n    coupons,\r\n    taxes,\r\n}: Checkout): OrderSummarySubtotalsProps {\r\n    return {\r\n        subtotalAmount: subtotal,\r\n        discountAmount,\r\n        giftCertificates,\r\n        giftWrappingAmount: giftWrappingCostTotal,\r\n        shippingAmount: hasSelectedShippingOptions(consignments) ?\r\n            shippingCostBeforeDiscount :\r\n            undefined,\r\n        handlingAmount: handlingCostTotal,\r\n        coupons,\r\n        taxes,\r\n    };\r\n}\r\n","import { LineItemMap } from '@bigcommerce/checkout-sdk';\r\n\r\nexport default function getLineItemsCount({\r\n    physicalItems,\r\n    digitalItems,\r\n    giftCertificates,\r\n    customItems,\r\n}: LineItemMap): number {\r\n    return physicalItems.length +\r\n        digitalItems.length +\r\n        giftCertificates.length +\r\n        (customItems || []).length;\r\n}\r\n","import { LineItemMap, ShopperCurrency as ShopperCurrencyType, StoreCurrency } from '@bigcommerce/checkout-sdk';\r\nimport React, { Fragment, FunctionComponent, ReactNode } from 'react';\r\n\r\nimport { preventDefault } from '../common/dom';\r\nimport { TranslatedString } from '../locale';\r\nimport { IconClose } from '../ui/icon';\r\nimport { Modal, ModalHeader } from '../ui/modal';\r\n\r\nimport OrderSummaryItems from './OrderSummaryItems';\r\nimport OrderSummarySection from './OrderSummarySection';\r\nimport OrderSummarySubtotals, { OrderSummarySubtotalsProps } from './OrderSummarySubtotals';\r\nimport OrderSummaryTotal from './OrderSummaryTotal';\r\n\r\nexport interface OrderSummaryDrawerProps {\r\n    additionalLineItems?: ReactNode;\r\n    lineItems: LineItemMap;\r\n    total: number;\r\n    storeCurrency: StoreCurrency;\r\n    shopperCurrency: ShopperCurrencyType;\r\n    isOpen: boolean;\r\n    headerLink?: ReactNode;\r\n    onRequestClose?(): void;\r\n    onAfterOpen?(): void;\r\n}\r\n\r\nconst OrderSummaryModal: FunctionComponent<OrderSummaryDrawerProps & OrderSummarySubtotalsProps> = ({\r\n    additionalLineItems,\r\n    children,\r\n    onRequestClose,\r\n    onAfterOpen,\r\n    storeCurrency,\r\n    shopperCurrency,\r\n    isOpen,\r\n    headerLink,\r\n    lineItems,\r\n    total,\r\n    ...orderSummarySubtotalsProps\r\n}) => (\r\n<Modal\r\n    additionalBodyClassName=\"cart-modal-body optimizedCheckout-orderSummary\"\r\n    additionalHeaderClassName=\"cart-modal-header optimizedCheckout-orderSummary\"\r\n    header={ renderHeader({ headerLink, onRequestClose }) }\r\n    isOpen={ isOpen }\r\n    onAfterOpen={ onAfterOpen }\r\n    onRequestClose={ onRequestClose }\r\n>\r\n    <OrderSummarySection>\r\n        <OrderSummaryItems items={ lineItems } />\r\n    </OrderSummarySection>\r\n    <OrderSummarySection>\r\n        <OrderSummarySubtotals\r\n            { ...orderSummarySubtotalsProps }\r\n        />\r\n        { additionalLineItems }\r\n    </OrderSummarySection>\r\n    <OrderSummarySection>\r\n        <OrderSummaryTotal\r\n            orderAmount={ total }\r\n            shopperCurrencyCode={ shopperCurrency.code }\r\n            storeCurrencyCode={ storeCurrency.code }\r\n        />\r\n    </OrderSummarySection>\r\n</Modal>\r\n);\r\n\r\nconst renderHeader: FunctionComponent<{\r\n    headerLink: ReactNode;\r\n    onRequestClose?(): void;\r\n}> = ({\r\n    onRequestClose,\r\n    headerLink,\r\n}) => (<Fragment>\r\n    <a\r\n        className=\"cart-modal-close\"\r\n        href=\"#\"\r\n        onClick={ preventDefault(onRequestClose) }\r\n    >\r\n        <span className=\"is-srOnly\">\r\n            <TranslatedString id=\"common.close_action\" />\r\n        </span>\r\n        <IconClose />\r\n    </a>\r\n    <ModalHeader additionalClassName=\"cart-modal-title\">\r\n        <TranslatedString id=\"cart.cart_heading\" />\r\n    </ModalHeader>\r\n\r\n    { headerLink }\r\n</Fragment>);\r\n\r\nexport default OrderSummaryModal;\r\n","import { LineItemMap, ShopperCurrency as ShopperCurrencyType, StoreCurrency } from '@bigcommerce/checkout-sdk';\r\nimport classNames from 'classnames';\r\nimport React, { memo, useCallback, FunctionComponent, ReactNode } from 'react';\r\n\r\nimport { ShopperCurrency } from '../currency';\r\nimport { TranslatedString } from '../locale';\r\nimport { IconGiftCertificate } from '../ui/icon';\r\nimport { ModalTrigger } from '../ui/modal';\r\n\r\nimport getItemsCount from './getItemsCount';\r\nimport getLineItemsCount from './getLineItemsCount';\r\nimport OrderSummaryModal from './OrderSummaryModal';\r\nimport { OrderSummarySubtotalsProps } from './OrderSummarySubtotals';\r\n\r\nexport interface OrderSummaryDrawerProps {\r\n    lineItems: LineItemMap;\r\n    total: number;\r\n    headerLink: ReactNode;\r\n    storeCurrency: StoreCurrency;\r\n    shopperCurrency: ShopperCurrencyType;\r\n    additionalLineItems?: ReactNode;\r\n}\r\n\r\nconst OrderSummaryDrawer: FunctionComponent<OrderSummaryDrawerProps & OrderSummarySubtotalsProps> = ({\r\n    additionalLineItems,\r\n    coupons,\r\n    discountAmount,\r\n    giftCertificates,\r\n    handlingAmount,\r\n    headerLink,\r\n    lineItems,\r\n    onRemovedCoupon,\r\n    onRemovedGiftCertificate,\r\n    shippingAmount,\r\n    shopperCurrency,\r\n    storeCreditAmount,\r\n    giftWrappingAmount,\r\n    storeCurrency,\r\n    subtotalAmount,\r\n    taxes,\r\n    total,\r\n}) => {\r\n    const renderModal = useCallback(props => (\r\n        <OrderSummaryModal\r\n            { ...props }\r\n            additionalLineItems={ additionalLineItems }\r\n            coupons={ coupons }\r\n            discountAmount={ discountAmount }\r\n            giftCertificates={ giftCertificates }\r\n            giftWrappingAmount={  giftWrappingAmount }\r\n            handlingAmount={ handlingAmount }\r\n            headerLink={ headerLink }\r\n            lineItems={ lineItems }\r\n            onRemovedCoupon={ onRemovedCoupon }\r\n            onRemovedGiftCertificate={ onRemovedGiftCertificate }\r\n            shippingAmount={ shippingAmount }\r\n            shopperCurrency={ shopperCurrency }\r\n            storeCreditAmount={ storeCreditAmount }\r\n            storeCurrency={ storeCurrency }\r\n            subtotalAmount={ subtotalAmount }\r\n            taxes={ taxes }\r\n            total={ total }\r\n        />\r\n    ), [\r\n        additionalLineItems,\r\n        coupons,\r\n        discountAmount,\r\n        giftCertificates,\r\n        handlingAmount,\r\n        headerLink,\r\n        lineItems,\r\n        onRemovedCoupon,\r\n        onRemovedGiftCertificate,\r\n        giftWrappingAmount,\r\n        shippingAmount,\r\n        shopperCurrency,\r\n        storeCreditAmount,\r\n        storeCurrency,\r\n        subtotalAmount,\r\n        taxes,\r\n        total,\r\n    ]);\r\n\r\n    return <ModalTrigger modal={ renderModal }>\r\n        { ({ onClick, onKeyPress }) => <div\r\n            className=\"cartDrawer optimizedCheckout-orderSummary\"\r\n            onClick={ onClick }\r\n            onKeyPress= { onKeyPress }\r\n            tabIndex= { 0 }\r\n        >\r\n            <figure\r\n                className={ classNames(\r\n                    'cartDrawer-figure',\r\n                    { 'cartDrawer-figure--stack': getLineItemsCount(lineItems) > 1 }\r\n                ) }\r\n            >\r\n                <div className=\"cartDrawer-imageWrapper\">\r\n                    { getImage(lineItems) }\r\n                </div>\r\n            </figure>\r\n            <div className=\"cartDrawer-body\">\r\n                <h3 className=\"cartDrawer-items optimizedCheckout-headingPrimary\">\r\n                    <TranslatedString\r\n                        data={ { count: getItemsCount(lineItems) } }\r\n                        id=\"cart.item_count_text\"\r\n                    />\r\n                </h3>\r\n                <a>\r\n                    <TranslatedString id=\"cart.show_details_action\" />\r\n                </a>\r\n            </div>\r\n            <div className=\"cartDrawer-actions\">\r\n                <h3 className=\"cartDrawer-total optimizedCheckout-headingPrimary\">\r\n                    <ShopperCurrency amount={ total } />\r\n                </h3>\r\n            </div>\r\n        </div> }\r\n    </ModalTrigger>;\r\n};\r\n\r\nfunction getImage(lineItems: LineItemMap): ReactNode {\r\n    const productWithImage = lineItems.physicalItems[0] || lineItems.digitalItems[0];\r\n\r\n    if (productWithImage && productWithImage.imageUrl) {\r\n        return <img\r\n            alt={ productWithImage.name }\r\n            data-test=\"cart-item-image\"\r\n            src={ productWithImage.imageUrl }\r\n        />;\r\n    }\r\n\r\n    if (lineItems.giftCertificates.length) {\r\n        return <IconGiftCertificate />;\r\n    }\r\n}\r\n\r\nexport default memo(OrderSummaryDrawer);\r\n","import React, { Component, Fragment, KeyboardEvent, KeyboardEventHandler, MouseEventHandler, ReactNode } from 'react';\r\n\r\nexport interface ModalTriggerProps {\r\n    children(props: { onClick: MouseEventHandler; onKeyPress: KeyboardEventHandler}): ReactNode;\r\n    modal(props: ModalTriggerModalProps): ReactNode;\r\n}\r\n\r\nexport interface ModalTriggerModalProps {\r\n    isOpen: boolean;\r\n    onRequestClose(): void;\r\n}\r\n\r\nexport interface ModalTriggerState {\r\n    isOpen: boolean;\r\n}\r\n\r\nexport default class ModalTrigger extends Component<ModalTriggerProps, ModalTriggerState> {\r\n    state = {\r\n        isOpen: false,\r\n    };\r\n\r\n    private canHandleEvent: boolean = false;\r\n\r\n    componentDidMount(): void {\r\n        this.canHandleEvent = true;\r\n    }\r\n\r\n    componentWillUnmount(): void {\r\n        this.canHandleEvent = false;\r\n    }\r\n\r\n    render() {\r\n        const { children, modal } = this.props;\r\n        const { isOpen } = this.state;\r\n\r\n        return (\r\n            <Fragment>\r\n                { children({\r\n                    onClick: this.handleOpen,\r\n                    onKeyPress: this.handleKeyOpen,\r\n                }) }\r\n\r\n                { modal({\r\n                    isOpen,\r\n                    onRequestClose: this.handleClose,\r\n                }) }\r\n            </Fragment>\r\n        );\r\n    }\r\n\r\n    private handleOpen: () => void = () => {\r\n        if (!this.canHandleEvent) {\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            isOpen: true,\r\n        });\r\n    };\r\n\r\n    private handleClose: () => void = () => {\r\n        if (!this.canHandleEvent) {\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            isOpen: false,\r\n        });\r\n    };\r\n\r\n    private handleKeyOpen: (keyboardEvent: KeyboardEvent<HTMLElement>) => void = keyboardEvent => {\r\n        if (keyboardEvent.key === 'Enter') {\r\n            this.handleOpen();\r\n        }\r\n    };\r\n}\r\n"],"names":["memo","cartUrl","props","headerLink","className","url","href","id","target","coupon","displayName","TranslatedString","code","giftCertificate","ShopperCurrency","amount","used","remaining","height","viewBox","width","xmlns","d","children","isRemoving","onRemove","disabled","onClick","type","AppliedCouponChecklistItem","onRemoved","handleRemove","useCallback","AppliedGiftCertificateChecklistItem","coupons","giftCertificates","isRemovingCoupon","isRemovingGiftCertificate","onRemovedCoupon","onRemovedGiftCertificate","length","map","key","RedeemableForm","appliedRedeemableError","isApplyingRedeemable","clearError","noop","submitForm","language","handleKeyDown","memoizeOne","setSubmitted","event","keyCode","preventDefault","handleSubmit","renderLabel","name","Label","hidden","htmlFor","renderErrorMessage","errorCode","renderInput","field","Fragment","errors","Alert","TextInput","translate","onKeyDown","testId","Button","isLoading","variant","renderContent","FormField","input","label","FormProvider","withLanguage","withFormik","mapPropsToValues","redeemableCode","applyCoupon","applyGiftCertificate","trim","validationSchema","required","shouldCollapseCouponCode","showAppliedRedeemables","formProps","Toggle","openByDefault","toggle","isOpen","mapToCartSummaryProps","context","getConfig","getCustomer","checkout","getCheckout","config","customer","redeemableProps","isStoreCreditApplied","grandTotal","storeCredit","shopperCurrency","links","cartLink","storeCurrency","currency","storeCreditAmount","Math","min","undefined","mapToRedeemableProps","checkoutService","data","getCoupons","getGiftCertificates","statuses","isApplyingCoupon","isApplyingGiftCertificate","getApplyCouponError","getApplyGiftCertificateError","getRemoveCouponError","getRemoveGiftCertificateError","removeCoupon","removeGiftCertificate","removedRedeemableError","checkoutSettings","isCouponCodeCollapsed","withRedeemable","OriginalComponent","subtotal","discountAmount","consignments","handlingCostTotal","shippingCostBeforeDiscount","giftWrappingCostTotal","taxes","subtotalAmount","giftWrappingAmount","shippingAmount","hasSelectedShippingOptions","handlingAmount","additionalLineItems","Redeemable","lineItems","cart","total","outstandingBalance","getLineItemsCount","physicalItems","digitalItems","customItems","renderHeader","onRequestClose","IconClose","ModalHeader","additionalClassName","onAfterOpen","orderSummarySubtotalsProps","Modal","additionalBodyClassName","additionalHeaderClassName","header","OrderSummarySection","OrderSummaryItems","items","OrderSummarySubtotals","OrderSummaryTotal","orderAmount","shopperCurrencyCode","storeCurrencyCode","renderModal","ModalTrigger","modal","onKeyPress","tabIndex","productWithImage","imageUrl","alt","src","IconGiftCertificate","getImage","count","getItemsCount","state","canHandleEvent","handleOpen","setState","handleClose","handleKeyOpen","keyboardEvent","componentDidMount","this","componentWillUnmount","render","Component"],"sourceRoot":""}